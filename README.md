# ü§ñ AI Telegram Bot

Telegram-–±–æ—Ç –Ω–∞ Python —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π **OpenAI GPT-3.5-turbo** –∏ **Anthropic Claude Sonnet 4.5** –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **–î–≤–µ AI –º–æ–¥–µ–ª–∏**: GPT-3.5-turbo –∏ Claude Sonnet 4.5 —Å extended thinking
- üí¨ **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**: –û—Ç–¥–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üéÆ **–ò–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∏**: –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
- ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, max tokens, system message
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
- üíæ **–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- üßπ **–û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**: –°–±—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π
- üìù **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ —Å–æ–±—ã—Ç–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `bot.log`
- üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: API –∫–ª—é—á–∏ –≤ `.env`, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ `.gitignore`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
CLI_API_AI_Assistant/
‚îú‚îÄ‚îÄ bot.py                 # Telegram –±–æ—Ç ‚≠ê
‚îú‚îÄ‚îÄ proxyapi_client.py     # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è OpenAI/Anthropic
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ context_manager.py     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ env_example.txt        # –ü—Ä–∏–º–µ—Ä .env
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/ArhyPlayer/CLI_API_AI_Assistant.git
cd CLI_API_AI_Assistant

# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
# macOS/Linux:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏–∑ –ø—Ä–∏–º–µ—Ä–∞:

```bash
cp env_example.txt .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env` –≤–∞—à–∏–º–∏ –∫–ª—é—á–∞–º–∏:

```env
# Telegram Bot Token (–ø–æ–ª—É—á–∏—Ç–µ —É @BotFather)
BOT_TOKEN=123456789:ABC-DEF1234ghIkl-zyx57W2v1u123ew11

# OpenAI API Key (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–µ–∏—Ö –º–æ–¥–µ–ª–µ–π —á–µ—Ä–µ–∑ proxyapi.ru)
OPENAI_API_KEY=sk-proj-...

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ proxy URLs (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —ç—Ç–∏)
OPENAI_BASE_URL=https://api.proxyapi.ru/openai/v1
ANTHROPIC_BASE_URL=https://api.proxyapi.ru/anthropic
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

**Telegram Bot Token:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ `.env`

**OpenAI API Key:**
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [proxyapi.ru](https://proxyapi.ru/)
- –ü–æ–ª—É—á–∏—Ç–µ –µ–¥–∏–Ω—ã–π API –∫–ª—é—á –¥–ª—è OpenAI –∏ Anthropic
- –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`

### 4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python bot.py
```

–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –ù–∞–π–¥–∏—Ç–µ –µ–≥–æ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`

## üéÆ –ö–æ–º–∞–Ω–¥—ã –∏ –∫–Ω–æ–ø–∫–∏

### –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º |
| `/help` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É |
| `/switch_openai` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ GPT-3.5-turbo |
| `/switch_claude` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ Claude Sonnet 4.5 |
| `/clear` | –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏ |
| `/stats` | –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ |
| `/status` | –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ |
| `/reset_stats` | –°–±—Ä–æ—Å–∏—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–æ–∫–µ–Ω–æ–≤ |

### –ò–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∏

**–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:**
- ü§ñ **–ú–æ–¥–µ–ª—å: GPT** / üß† **–ú–æ–¥–µ–ª—å: Claude** - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
- ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã AI
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- üßπ **–û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç** - –°–±—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏
- ‚ÑπÔ∏è **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** - –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚ùì **–ü–æ–º–æ—â—å** - –°–ø—Ä–∞–≤–∫–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- üå°Ô∏è **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞** - –ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (0.0-1.5)
- üìè **Max Tokens** - –î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞ (500-4000)
- üí¨ **System Message** - –†–æ–ª—å AI
- üîÑ **–°–±—Ä–æ—Å–∏—Ç—å** - –í–µ—Ä–Ω—É—Ç—å –∫ –¥–µ—Ñ–æ–ª—Ç—É

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã AI

### üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (Temperature)
–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤:

- **0.0** - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ—á–Ω—ã–π –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π
- **0.7** - –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **1.0** - –¢–≤–æ—Ä—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
- **1.5** - –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π

### üìè –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (Max Tokens)
–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–∞:

- **500** - –ö–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã
- **1000** - –°—Ç–∞–Ω–¥–∞—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **2000** - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- **4000** - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è Claude Sonnet —Å extended thinking, –µ—Å–ª–∏ `max_tokens < 1536`, –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏—Ç –¥–æ 2048.

### üí¨ System Message
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ AI. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `"–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é."`

–ü—Ä–∏–º–µ—Ä—ã:
- `"–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ Python"`
- `"–û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É"`
- `"–¢—ã - –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫"`

–û—Ç–ø—Ä–∞–≤—å—Ç–µ `-` –¥–ª—è —Å–±—Ä–æ—Å–∞ –∫ –¥–µ—Ñ–æ–ª—Ç—É.

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

–ë–æ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏:

```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤:

ü§ñ GPT-3.5-turbo: 1,234 —Ç–æ–∫–µ–Ω–æ–≤
üß† Claude Sonnet: 567 —Ç–æ–∫–µ–Ω–æ–≤
üìà –í—Å–µ–≥–æ: 1,801 —Ç–æ–∫–µ–Ω–æ–≤

üéØ –¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å: Claude Sonnet
```

- –ü—Ä–∏ `/clear` —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è
- `/reset_stats` –æ—á–∏—â–∞–µ—Ç –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏

## ü§ñ –ú–æ–¥–µ–ª–∏ AI

### GPT-3.5-turbo (OpenAI)
- ‚ö° –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã
- üí∞ –≠–∫–æ–Ω–æ–º–∏—á–Ω–∞—è
- ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞, –±–∞–∑–æ–≤—ã—Ö –∑–∞–¥–∞—á

### Claude Sonnet 4.5 (Anthropic)
- üß† Extended thinking - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π
- üéØ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑
- ‚úÖ –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ
- üìà –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏ –¥–ª—è thinking

## üíª API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### ProxyAPIClient

–ö–ª–∞—Å—Å –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å AI –º–æ–¥–µ–ª—è–º–∏.

```python
from proxyapi_client import ProxyAPIClient

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
client = ProxyAPIClient(
    provider="openai",  # –∏–ª–∏ "anthropic"
    model="gpt-3.5-turbo",
    temperature=0.7,
    max_tokens=1000
)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ system prompt
client.set_system_prompt("–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ Python")

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤)
response, tokens_used = client.send_message("–û–±—ä—è—Å–Ω–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã")
print(f"–û—Ç–≤–µ—Ç: {response}")
print(f"–¢–æ–∫–µ–Ω–æ–≤: {tokens_used}")

# –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
client.clear_history()

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
history = client.get_history()
```

**–ú–µ—Ç–æ–¥—ã:**
- `send_message(message, system_prompt=None)` ‚Üí `(response, tokens_used)`
- `set_system_prompt(prompt)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- `clear_history()` - –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
- `get_history()` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
- `add_message(role, content)` - –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `provider` - "openai" –∏–ª–∏ "anthropic"
- `model` - –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
- `messages` - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- `temperature` - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `max_tokens` - –ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤
- `system_prompt` - –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- `last_thinking_text` - –†–∞–∑–º—ã—à–ª–µ–Ω–∏—è Claude (–µ—Å–ª–∏ –µ—Å—Ç—å)

### ContextManager

–ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

```python
from context_manager import ContextManager

manager = ContextManager()

# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
context = manager.get_context(user_id=123456)

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
manager.update_context(
    user_id=123456,
    messages=[...],
    model="gpt-3.5-turbo",
    provider="openai",
    system_prompt="–¢—ã - –ø–æ–º–æ—â–Ω–∏–∫",
    temperature=0.7,
    max_tokens=1000
)

# –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
manager.clear_context(user_id=123456)

# –†–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏
manager.add_tokens_used(user_id=123456, provider="openai", tokens=150)
tokens = manager.get_tokens_used(user_id=123456, provider="openai")
manager.reset_tokens_used(user_id=123456, provider="openai")
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª `config.py` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```python
# –ú–æ–¥–µ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
DEFAULT_MODEL_OPENAI = "gpt-3.5-turbo"
DEFAULT_MODEL_ANTHROPIC = "claude-sonnet-4-5-20250929"

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
DEFAULT_TEMPERATURE = 0.7
DEFAULT_MAX_TOKENS = 1000
DEFAULT_SYSTEM_PROMPT = "–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é."

# –ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏
MAX_CONTEXT_LENGTH = 50

# Proxy URLs (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ .env)
OPENAI_BASE_URL = "https://api.proxyapi.ru/openai/v1"
ANTHROPIC_BASE_URL = "https://api.proxyapi.ru/anthropic"
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–≤ .gitignore)

- ‚úÖ `.env` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏
- ‚úÖ `user_contexts.json` - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ `bot.log` - –ª–æ–≥–∏ —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- ‚úÖ `__pycache__/` - —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ `venv/` - –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- üîí –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –≤ git
- üîÑ –†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ API –∫–ª—é—á–∏
- üë• –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è dev/prod
- üìù –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —É—Ç–µ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```
openai==2.14.0          # OpenAI API –∫–ª–∏–µ–Ω—Ç
anthropic==0.75.0       # Anthropic API –∫–ª–∏–µ–Ω—Ç
aiogram==3.24.0         # Telegram Bot framework
python-dotenv==1.2.1    # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞–º–∏
```

–£—Å—Ç–∞–Ω–æ–≤–∫–∞: `pip install -r requirements.txt`

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ
source venv/bin/activate  # macOS/Linux
venv\Scripts\activate     # Windows

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt --force-reinstall
```

### –û—à–∏–±–∫–∞ "ModuleNotFoundError"
–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º.

### –û—à–∏–±–∫–∞ API
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª—é—á–∏ –∞–∫—Ç–∏–≤–Ω—ã –Ω–∞ proxyapi.ru
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `bot.log`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ `/start` –∑–∞–Ω–æ–≤–æ

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –ø–æ–¥—Å—á–µ—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤
- –£–¥–∞–ª–∏—Ç–µ `user_contexts.json` –¥–ª—è —Å–±—Ä–æ—Å–∞

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- Telegram –±–æ—Ç —Å –∏–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∞–º–∏
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã AI
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
- –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### üí° –ò–¥–µ–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
- üìÑ –†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ (PDF, DOCX, TXT)
- üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Flask/FastAPI)
- üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, MongoDB)
- üé® –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≥–æ–ª–æ—Å)
- üß† RAG –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
- üë• –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤
- üìä –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- üé§ –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –ª—é–±—ã—Ö —Ü–µ–ª—è—Ö.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

Contributions –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! 

1. Fork –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing`)
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÆ –ö–æ–Ω—Ç–∞–∫—Ç—ã

–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è? –°–æ–∑–¥–∞–≤–∞–π—Ç–µ [Issues](https://github.com/ArhyPlayer/CLI_API_AI_Assistant/issues)!

---

**–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è! üöÄ**

*Powered by OpenAI GPT-3.5-turbo & Anthropic Claude Sonnet 4.5*
